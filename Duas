import { Card } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Tabs, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Search, Hand, Sun, Moon, Shield, Heart, Star } from 'lucide-react';
import { motion } from 'framer-motion';
import DuaCard from '@/components/dua/DuaCard';

const defaultDuas = [
  {
    id: 1,
    title: 'Morning Remembrance',
    arabic_text: 'أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ',
    transliteration: "Asbahna wa asbahal-mulku lillahi wal-hamdu lillahi la ilaha illallahu wahdahu la sharika lahu, lahul-mulku wa lahul-hamdu wa huwa 'ala kulli shay'in qadir",
    translation: 'We have entered a new day and with it all the dominion which belongs to Allah. Praise is to Allah. None has the right to be worshipped but Allah alone, Who has no partner. To Allah belongs the dominion, and to Him is the praise and He is Able to do all things.',
    category: 'morning',
    source: 'Abu Dawud'
  },
  {
    id: 2,
    title: 'Evening Remembrance',
    arabic_text: 'أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ',
    transliteration: "Amsayna wa amsal-mulku lillahi wal-hamdu lillahi la ilaha illallahu wahdahu la sharika lahu, lahul-mulku wa lahul-hamdu wa huwa 'ala kulli shay'in qadir",
    translation: 'We have entered upon evening and the dominion belongs to Allah. Praise is to Allah. None has the right to be worshipped except Allah, alone, without partner. To Him belongs all sovereignty and praise, and He is over all things omnipotent.',
    category: 'evening',
    source: 'Abu Dawud'
  },
  {
    id: 3,
    title: 'Before Sleeping',
    arabic_text: 'بِاسْمِكَ اللَّهُمَّ أَمُوتُ وَأَحْيَا',
    transliteration: 'Bismika Allahumma amutu wa ahya',
    translation: 'In Your name O Allah, I die and I live.',
    category: 'evening',
    source: 'Sahih al-Bukhari'
  },
  {
    id: 4,
    title: 'Protection from Evil',
    arabic_text: 'أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ',
    transliteration: "A'udhu bikalimati-llahi-tammati min sharri ma khalaq",
    translation: 'I seek refuge in the Perfect Words of Allah from the evil of what He has created.',
    category: 'protection',
    source: 'Sahih Muslim'
  },
  {
    id: 5,
    title: 'For Forgiveness',
    arabic_text: 'أَسْتَغْفِرُ اللَّهَ الَّذِي لَا إِلَهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ وَأَتُوبُ إِلَيْهِ',
    transliteration: 'Astaghfirullaha-ladhi la ilaha illa huwal-Hayyul-Qayyumu wa atubu ilayh',
    translation: 'I seek the forgiveness of Allah, there is no god but He, the Ever-Living, the Self-Subsisting, and I turn to Him in repentance.',
    category: 'forgiveness',
    source: 'Abu Dawud, at-Tirmidhi'
  },
  {
    id: 6,
    title: 'Before Eating',
    arabic_text: 'بِسْمِ اللَّهِ وَعَلَى بَرَكَةِ اللَّهِ',
    transliteration: "Bismillahi wa 'ala barakatillah",
    translation: 'In the name of Allah and with the blessings of Allah.',
    category: 'general',
    source: 'Abu Dawud'
  },
  {
    id: 7,
    title: 'After Eating',
    arabic_text: 'الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا وَجَعَلَنَا مُسْلِمِينَ',
    transliteration: 'Alhamdu lillahil-ladhi at'amana wa saqana wa ja'alana muslimin',
    translation: 'Praise be to Allah Who has given us food and drink and made us Muslims.',
    category: 'general',
    source: 'Abu Dawud, at-Tirmidhi'
  },
  {
    id: 8,
    title: 'For Gratitude',
    arabic_text: 'اللَّهُمَّ أَعِنِّي عَلَى ذِكْرِكَ وَشُكْرِكَ وَحُسْنِ عِبَادَتِكَ',
    transliteration: "Allahumma a'inni 'ala dhikrika wa shukrika wa husni 'ibadatik",
    translation: 'O Allah, help me to remember You, to thank You, and to worship You in the best way.',
    category: 'gratitude',
    source: 'Abu Dawud, an-Nasai'
  },
  {
    id: 9,
    title: 'Before Prayer',
    arabic_text: 'اللَّهُمَّ بَاعِدْ بَيْنِي وَبَيْنَ خَطَايَايَ كَمَا بَاعَدْتَ بَيْنَ الْمَشْرِقِ وَالْمَغْرِبِ',
    transliteration: "Allahumma ba'id bayni wa bayna khatayaya kama ba'adta baynal-mashriqi wal-maghrib",
    translation: 'O Allah, distance me from my sins as You have distanced the East from the West.',
    category: 'prayer',
    source: 'Sahih al-Bukhari, Sahih Muslim'
  },
  {
    id: 10,
    title: 'Entering the Masjid',
    arabic_text: 'اللَّهُمَّ افْتَحْ لِي أَبْوَابَ رَحْمَتِكَ',
    transliteration: 'Allahumma-ftah li abwaba rahmatik',
    translation: 'O Allah, open for me the doors of Your mercy.',
    category: 'prayer',
    source: 'Sahih Muslim'
  }
];

const categories = [
  { id: 'all', label: 'All', icon: Star },
  { id: 'morning', label: 'Morning', icon: Sun },
  { id: 'evening', label: 'Evening', icon: Moon },
  { id: 'protection', label: 'Protection', icon: Shield },
  { id: 'prayer', label: 'Prayer', icon: Hand },
  { id: 'gratitude', label: 'Gratitude', icon: Heart },
];

export default function Duas() {
  const [searchQuery, setSearchQuery] = useState('');
  const [activeCategory, setActiveCategory] = useState('all');
  const [favorites, setFavorites] = useState([]);

  const filteredDuas = defaultDuas.filter(dua => {
    const matchesSearch = dua.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                         dua.translation.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesCategory = activeCategory === 'all' || dua.category === activeCategory;
    return matchesSearch && matchesCategory;
  });

  const toggleFavorite = (dua) => {
    setFavorites(prev => 
      prev.includes(dua.id) 
        ? prev.filter(id => id !== dua.id)
        : [...prev, dua.id]
    );
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-purple-50 to-white">
      {/* Header */}
      <div className="bg-gradient-to-br from-purple-600 to-indigo-700 text-white px-4 py-8">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center gap-3 mb-2">
            <div className="w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center">
              <Hand className="w-6 h-6" />
            </div>
            <div>
              <h1 className="text-2xl font-bold">Duas & Supplications</h1>
              <p className="text-purple-200 text-sm">Prayers from Quran & Sunnah</p>
            </div>
          </div>
        </div>
      </div>
      
      {/* Search & Filters */}
      <div className="max-w-4xl mx-auto px-4 -mt-4">
        <Card className="p-4 shadow-lg border-0">
          <div className="relative mb-4">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" />
            <Input
              placeholder="Search duas..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-10 bg-slate-50 border-slate-200"
            />
          </div>
          
          <div className="flex gap-2 overflow-x-auto pb-2">
            {categories.map(cat => {
              const Icon = cat.icon;
              return (
                <button
                  key={cat.id}
                  onClick={() => setActiveCategory(cat.id)}
                  className={`flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap transition-all ${
                    activeCategory === cat.id
                      ? 'bg-purple-600 text-white'
                      : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
                  }`}
                >
                  <Icon className="w-4 h-4" />
                  <span className="text-sm font-medium">{cat.label}</span>
                </button>
              );
            })}
          </div>
        </Card>
      </div>
      
      {/* Duas List */}
      <div className="max-w-4xl mx-auto px-4 py-6 space-y-4 pb-24">
        {filteredDuas.map((dua, index) => (
          <motion.div
            key={dua.id}
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: index * 0.05 }}
          >
            <DuaCard
              dua={dua}
              isFavorite={favorites.includes(dua.id)}
              onToggleFavorite={toggleFavorite}
            />
          </motion.div>
        ))}
        
        {filteredDuas.length === 0 && (
          <Card className="p-12 text-center">
            <Hand className="w-12 h-12 mx-auto text-slate-300 mb-4" />
            <p className="text-slate-500">No duas found matching your search</p>
          </Card>
        )}
      </div>
    </div>
  );
}
